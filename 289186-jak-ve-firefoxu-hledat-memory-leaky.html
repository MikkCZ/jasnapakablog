<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/2000/REC-xhtml1-20000126/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="cs" lang="cs">

<!-- Mirrored from jasnapaka.bloguje.cz/289186-jak-ve-firefoxu-hledat-memory-leaky.php by HTTrack Website Copier/3.x [XR&CO'2008], Thu, 11 Feb 2010 21:31:24 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=iso-8859-2"><!-- /Added by HTTrack -->
<head><link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml" /><link rel="alternate" type="application/rss+xml" title="RSS - Mozilla" href="tema-2-mozilla.xml" /><link rel="alternate" type="application/rss+xml" title="Komentáře" href="comments.xml" /> 
 <meta http-equiv="content-language" content="cs" />
 <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /> 
 <meta name="robots" content="all,follow" />
 <meta name="author" content="Pavel Cvrček [JasnaPaka], mailto:jasnapaka@jasnapaka.com" />
 <meta name="copyright" content="Pavel Cvrček" />
 <meta name="keywords" content="Firefox, Thunderbird, Mozilla, Sunbird, SeaMonkey" />
 <meta name="description" content="Aktuální novinky o Firefoxu, Thunderbirdu a dalších aplikacích Mozilla. Užitečné návody, tipy a rady." />

 
 <title>Jak ve Firefoxu hledat memory leaky - JasnaPaka Blog</title>
 
 <link type="text/css" rel="stylesheet" href="css2849.css" title="Základní styl" />
 <link rel="search" type="application/opensearchdescription+xml" title="JasnaPaka Blog" href="osd.xml" />
 <link rel="shortcut icon" href="favicon.ico" />
 <link rel="alternate" type="application/atom+xml" title="ATOM" href="atom.xml" />
</head>
<body>
<!-- (C)2000-2008 Gemius SA - gemiusAudience / bloguje.cz / Bloguje -->
<script type="text/javascript">
<!--//--><![CDATA[//><!--
var pp_gemius_identifier = new String('..hK6LR3j7Y7SsSlu.85f2a0HZFNLuLMgs6aWr23goz.O7');
//--><!]]>
</script>
<script type="text/javascript" src="../static.bloguje.cz.s3.amazonaws.com/xgemius.js"></script>


<script type="text/javascript">
<!--

function addSearchEngine() {
 if ((window.external) && (typeof window.external.addSearchEngine == "function")) {
 window.external.addSearchEngine ("osd.xml", 
 "favicon.png", "JasnaPaka Blog", "JasnaPaka Blog");
 }
 else {
 alert("Váš prohlížeč bohužel nepodporuje vyhledávací moduly ve formátu OpenSearch.\nTy podporuje Mozilla Firefox 2.0 a Internet Explorer 7.0. Případně jejich novější verze.");
 }
}

//-->
</script>

<div><span id="top" /></div>
<p id="hide">
 <a href="#posts">Přeskočit navigaci</a>
</p>

<div id="page">
<div style="padding: 10px 0 10px 10px;margin:10px; border: 2px solid #1F4363;margin: 0 0 15px 0;background-color: #F0F6F9;">
 Tento blog byl již <strong>ukončen</strong>. Aktuální novinky ze světa Mozilly nyní hledejte na webu <a href="http://www.mozilla.cz/" title="Mozilla.cz: Mozilla v České republice">Mozilla.cz</a>.
</div>

 <div id="header">
 <table style="border:0"><tr><td id="blog-caption" style="border:0; width: 700px">

 
 <div id="caption"><a href="index.html" title="Dění okolo Firefoxu, Thunderbirdu, Mozilly ..." id="heading">JasnaPaka Blog</a></div>


 <p id="subheading">Firefox, Thunderbird, Mozilla, novinky, tipy, rady...</p> </td>
 <td id="blog-search">

<!-- Google CSE Search Box Begins -->
 <form id="searchbox_006927761123917035100:l49kun9lnne" action="http://www.google.com/cse">
 <div>
 <input type="hidden" name="cx" value="006927761123917035100:l49kun9lnne" />
 <input type="hidden" name="cof" value="FORID:0" />
 <input type="hidden" name="ie" value="iso-8859-2" />
 <input name="q" type="text" size="20" />
 <input type="submit" name="sa" value="Vyhledat" />
 </div>
 </form>
<!-- Google CSE Search Box Ends -->
 
 </td>
 </tr></table> 
 </div>
 
 <div id="contents">
 <div id="lmenu">
 <div class="menu-topic"><strong>NAVIGACE</strong></div>
 <ul>
 <li><a href="http://www.mozilla.cz/" title="Dění okolo Firefoxu, Thunderbirdu ...">Novinky</a></li>
 <li><a href="http://www.mozilla.cz/produkty/firefox/" title="Pár slov o Firefoxu">O Firefoxu</a></li>
 <li><a href="http://www.mozilla.cz/podpora/" title="Návody a tipy k Firefoxu a Thunderbirdu">Návody</a></li>
 <li><a href="http://www.mozilla.cz/stahnout/" title="Stáhnout Firefox, Thunderbird...">Stáhnout</a></li>
 </ul> 
 
 <div id="rss-pos">
 <a href="rss.xml" title="RSS příspěvků"><img src="rss.png" alt="RSS" width="16" height="16" class="rss-pic" /></a> 
 <a href="javascript:addSearchEngine()" title="Přidat vyhledávací modul"><img src="opensearch.png" alt="Vyhledávací modul" width="16" height="16" class="rss-pic" /></a>
 </div>

 <div class="menu-topic"><strong>ARCHIV</strong></div>
 
 <ul>
 <li><a href="0909archiv.html">září 2009</a></li><li><a href="0908archiv.html">srpen 2009</a></li><li><a href="0907archiv.html">červenec 2009</a></li><li><a href="0906archiv.html">červen 2009</a></li><li><a href="0905archiv.html">květen 2009</a></li><li><a href="0904archiv.html">duben 2009</a></li><li><a href="0903archiv.html">březen 2009</a></li><li><a href="0902archiv.html">únor 2009</a></li><li><a href="0901archiv.html">leden 2009</a></li><li><a href="0812archiv.html">prosinec 2008</a></li><li><a href="0811archiv.html">listopad 2008</a></li><li><a href="0810archiv.html">říjen 2008</a></li><li><a href="0809archiv.html">září 2008</a></li><li><a href="0808archiv.html">srpen 2008</a></li><li><a href="0807archiv.html">červenec 2008</a></li><li><a href="0806archiv.html">červen 2008</a></li><li><a href="0805archiv.html">květen 2008</a></li><li><a href="0804archiv.html">duben 2008</a></li><li><a href="0803archiv.html">březen 2008</a></li><li><a href="0802archiv.html">únor 2008</a></li><li><a href="0801archiv.html">leden 2008</a></li><li><a href="0712archiv.html">prosinec 2007</a></li><li><a href="0711archiv.html">listopad 2007</a></li><li><a href="0710archiv.html">říjen 2007</a></li><li><a href="0709archiv.html">září 2007</a></li><li><a href="0708archiv.html">srpen 2007</a></li><li><a href="0707archiv.html">červenec 2007</a></li><li><a href="0706archiv.html">červen 2007</a></li><li><a href="0705archiv.html">květen 2007</a></li><li><a href="0704archiv.html">duben 2007</a></li><li><a href="0703archiv.html">březen 2007</a></li><li><a href="0702archiv.html">únor 2007</a></li><li><a href="0701archiv.html">leden 2007</a></li><li><a href="0612archiv.html">prosinec 2006</a></li><li><a href="0611archiv.html">listopad 2006</a></li><li><a href="0610archiv.html">říjen 2006</a></li><li><a href="0609archiv.html">září 2006</a></li><li><a href="0608archiv.html">srpen 2006</a></li><li><a href="0607archiv.html">červenec 2006</a></li><li><a href="0606archiv.html">červen 2006</a></li><li><a href="0605archiv.html">květen 2006</a></li><li><a href="0604archiv.html">duben 2006</a></li><li><a href="0603archiv.html">březen 2006</a></li><li><a href="0602archiv.html">únor 2006</a></li><li><a href="0601archiv.html">leden 2006</a></li><li><a href="0512archiv.html">prosinec 2005</a></li><li><a href="0511archiv.html">listopad 2005</a></li><li><a href="0510archiv.html">říjen 2005</a></li><li><a href="0509archiv.html">září 2005</a></li><li><a href="0508archiv.html">srpen 2005</a></li>
 </ul>

 <div>
 <div style="margin-top:5px"><a href="http://www.softeu.cz/"><img src="img/softeu-icon.png" alt="Ikona SoftEU" /></a></div>

 <div style="margin-top:5px"><a href="http://www.bloguje.cz/"><img src="../www.bloguje.cz/bloguje.png" alt="bloguje.cz" /></a></div>


 </div>
 </div>

<div id="rmenu">

<div class="menu-topic"><strong>NÁVODY A TIPY</strong></div>
<div class="rel-ram">
 <table border="0"><tr>
 <td><a href="http://www.mozilla.cz/podpora/" title="Návody a tipy k aplikacím Mozilla"><img src="img/help-64.png" alt="Návody a tipy" /></a></td>
 <td>
<a href="http://www.mozilla.cz/podpora/" title="Návody a tipy k aplikacím Mozilla">Řešení problémů<br />Návody, jak ...<br />Triky</a>
</td></tr></table>
</div>


<div class="menu-topic"><strong>PODPORA K FIREFOXU</strong></div>
<div class="rel-ram">
 <table border="0"><tr>
 <td><a href="http://www.mozilla.cz/podpora/firefox/" title="Česká podpora k Firefoxu"><img src="img/sumo-logo.png" alt="Česká podpora k Firefoxu" /></a></td>
 <td>
<a href="http://www.mozilla.cz/podpora/firefox/" title="Česká podpora k Firefoxu">Česká<br />podpora<br />k Firefoxu</a>
</td></tr></table>
</div>

<div class="menu-topic"><strong>STÁHNOUT</strong></div>
<div class="rel-ram">
 <table border="0"><tr>
 <td><a href="http://www.mozilla.cz/stahnout/" title="Stáhnout Firefox, Thunderbird..."><img src="img/download-icon.png" alt="Download" /></a></td>
 <td>
<a href="http://www.mozilla.cz/stahnout/" title="Stáhnout Firefox, Thunderbird...">Firefox<br />Thunderbird<br />a další...</a>
</td></tr></table>
</div>

</div>


 <div id="posts">
 

 <div class="post">


<h1 class="post-caption">Jak ve Firefoxu hledat memory leaky</h1>

<p>Od ledna existuje ve <a href="http://firefox.czilla.cz/" title="Přejděte na Firefox!">Firefoxu</a> pěkná možnost vyhledávání některých typů memory leaků. Pokud chcete pomoci s jejich vyhledáváním, řiďte se pomocí následujícího návodu.</p>

<p>Prvně budete potřebovat <a href="http://ftp.mozilla.org/pub/mozilla.org/firefox/nightly/latest-trunk/" title="Poslední vývojová verze Firefoxu" hreflang="en">poslední vývojou verzi Firefoxu</a>. Možnost ladění memory leaků přijde i s Firefoxem 1.5.0.2, ale ten v době psaní tohoto příspěvku není k dispozici.</p>

<p>Vytvořte si nový uživatelský profil. Je důležité, aby se jednalo o čistý profil tj. <strong>bez jakýchkoliv rozšíření</strong>. Tím se zabrání jakýmkoliv negativním vlivům, které mohou mít rozšíření na výsledek hledání. Celkem užitečné je vyhledávání memory leaků i v různých rozšířeních, což se provádí tak, že se jednotlivá rozšíření postupně instalují (po testu opětovně odinstalují) a dle popisu níže se hledá, zda neobsahují memory leaky.</p>

<p>Dale budete potřebovat <a href="http://www.activestate.com/Products/ActivePerl/" title="ActivePerl: Domovská stránka">Perl pro Windows</a> a <a href="http://lxr.mozilla.org/mozilla/source/tools/footprint/leak-gauge.pl?raw=1" title="Perlový skript na analýzu logu" hreflang="en">perlový skript na analýzu</a>. Pro správnou funkčnost potřebujete nastavit systémovou proměnnou <em>NSPR_LOG_MODULES</em> na hodnotu <em>DOMLeak:5,DocumentLeak:5,nsDocShellLeak:5</em> a proměnnou <em>NSPR_LOG_FILE</em> na hodnotu <em>nspr.log</em>, což bude jméno výstupního logovacího souboru. Můžete jej tedy pojmenovat i jinak. Detailnější popis je uveden přímo v <a href="http://lxr.mozilla.org/mozilla/source/tools/footprint/leak-gauge.pl?raw=1" title="Perlový skript na analýzu logu" hreflang="en">perlovém skriptu</a>.</p>

<p>Celé testování probíhá vcelku jednoduše. Nakopírujete perlový skript do adresáře s Firefoxem (tam kde je spouštěcí soubor <span class="soubor">firefox.exe</span>) a spustíte Firefox s kterým normálně pracujete. Ve stejném adresáři se vytvoří výstupní logovací soubor <span class="soubor">nspr.log</span> (či jiný vámi nastavený), který se bude postupně plnit. Čím déle bude pracovat s Firefoxem, tím větší soubor bude. Nakonec ukončete Firefox.</p>

<p>Otevřete příkazový řádek a přesuňte se do adresáře s instalací Firefoxu a spusťte následující kód:</p>

<pre class="codear"><code>perl leak-gauge.pl nspr.log</code></pre>

<p>Výstupem bude pár řádků do konzole. Výsledek by měl v ideálním případě vypadat podobně, jako v následujícím výstupu.</p>

<pre class="codear"><code>Leaked 0 out of 15 DOM Windows
Leaked 0 out of 44 documents
Leaked 0 out of 6 docshells</code></pre>

<p>Výše uvedený výstup neodhalil žádný memory leak. Pokud za slovem "Leaked" naleznete jinou hodnotu než nula, našli jste memory leak. Takový memory leak je <a href="http://bugzilla.mozilla.org/" title="Bugzilla: Domovská stránka" hreflang="en">dobré nahlásit</a>. Podotýkám, že nemá smysl hlásit něco, co se vám podařilo jednou provést a neumíte to zreprodukovat. Informace typu "sem přes den pracoval s webem a výstupem je memory leak" není užitečná a nikomu nepomůže. Je potřeba co nejvíce přibližně zreprodukovat problém. Hlášení typu "stává se to na této stránce" už užitečné je.</p>

<p><strong>Upozornění</strong>: Při každém spuštění Firefoxu se obsah souboru <span class="soubor">nspr.log</span> vymaže.</p>

<p>Nyní krátce k tomu, jak memory leaky dohledávat. Pokud vám analýza logu odhalí memory leak, většinou k výše uvedeným třem řádkům uvede, kde tento leak nastal. Buď se může jednat o URL stránky, jméno zdrojového souboru Firefoxu či adresu v paměti. Pokud se jedná o leak na webové stránce, spusťte Firefox, navštivte uvedenou stránku a ukončete Firefox. Nyní opětovně proveďte spuštění skriptu. Pokud se vám podařilo leak opětovně nadetekovat, je dobré ho nahlásit. Často se stává, že leak vznikne, když provedete na uvedeném webu konkrétní akci. Např. přejedete myši přes nějaký prvek, na něco konkrétního klepnete apod. Pokoušejte se tedy o akce, které jste dělali při poslední návštěvě, která zaznamenala memory leak.</p>

<p>Pokud skript odhalil memory leak ve zdrojovém souboru Firefoxu, souvisí chyba s rozhraním Firefoxu. V takovém případě zapřemýšlejte nad tím, co jste v rámci posledního spuštění dělali. Např. smazali záložku, otevřeli soubor z disku apod. Zkuste uvedené akce znovu a pokoušejte se memory leak zreprodukovat.</p>

<h3>Co dál</h3>

<p>Řada lidí nehlásí chyby, protože neumí moc anglicky, pracovat s nástrojem na hlášení chyb apod. Pokud se vám podle výše uvedeného návodu podaří zreproduktovat memory leak, <a href="mailto:jasnapaka[zavináč]jasnapaka.com">napište mi</a>, zkusíme ho více zkonkretizovat a případně nahlásit. Mějte však na paměti, že pokud se nebudete řídit výše uvedenými pokyny, nemá vaše hlášení smysl. Máteli k uvedenému návodu dotaz, můžete mi též <a href="mailto:jasnapaka[zavináč]jasnapaka.com">napsat</a>.</p>





<p><strong>Přečtěte si také</strong>:</p>

<ul>
 <li><a href="289267-firefox-a-pamet.html" title="Firefox a paměť">Firefox a paměť</a></li>
 <li><a href="287844-sprava-vyhledavacich-modulu-ve-firefoxu.html" title="Správa vyhledávacích modulů ve Firefoxu">Správa vyhledávacích modulů ve Firefoxu</a></li>
</ul>




<div class="post-footer">
 <div class="post-sign">Přidáno: 10. března 2006 15:28,
 <a href="289186-jak-ve-firefoxu-hledat-memory-leaky.html#view-comments" title="Zobrazit komentáře">Komentáře (0)</a>,
 <a href="289186-jak-ve-firefoxu-hledat-memory-leaky.html" title="Trvalý odkaz">Trvalý odkaz</a></div><div class="post-navig">
 <a href="#top" title="Přesun na horní část stránky">nahoru</a></div>
</div>



<p> <a href="http://linkuj.cz/?id=linkuj&amp;url=http%3A%2F%2Fjasnapaka.bloguje.cz%2F289186-jak-ve-firefoxu-hledat-memory-leaky.php&amp;title=Jak+ve+Firefoxu+hledat+memory+leaky"><img src="../linkuj.cz/img/badge.png" style="border:0" title="Linkuj si !" alt="Linkuj si !" /></a> <a href="http://vybrali.sme.sk/submit.php?url=http%3A%2F%2Fjasnapaka.bloguje.cz%2F289186-jak-ve-firefoxu-hledat-memory-leaky.php"><img src="../blog.sme.sk/blog/3/61630/tlacitko.gif" style="border:0" title="asdf.sk" alt="asdf.sk" /></a></p>

<h3 id="view-comments" class="comments">Komentáře</h3>



<p>K příspěvku dosud nebyl přidán komentář.</p>

<h3 class="comments">Přidat komentář</h3> 
<p>K tomuto příspěvku není možné přidávat další komentáře.</p>





</div>




<p id="footer" class="vcard">
&copy; 2005-2009 <span class="fn">Pavel Cvrček</span> (<span class="fn nickname">JasnaPaka</span>), e-mail: <a href="mailto:jasnapaka@jasnapaka.com" title="Napsat e-mail" class="fn email">jasnapaka@jasnapaka.com</a>, <a href="rss.xml"
title="RSS příspěvků">RSS</a>. 
</p>

</div> <!-- posts --> 
</div> <!-- contents -->

<div id="clear">&nbsp;</div>

</div> <!-- page -->

<script src="../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-263132-1";
urchinTracker();
</script>

</body>

<!-- Mirrored from jasnapaka.bloguje.cz/289186-jak-ve-firefoxu-hledat-memory-leaky.php by HTTrack Website Copier/3.x [XR&CO'2008], Thu, 11 Feb 2010 21:31:24 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=iso-8859-2"><!-- /Added by HTTrack -->
</html>

